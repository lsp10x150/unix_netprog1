If select tells us that the socket is writable, the socket send buffer has room for 8'192 bytes, but when we call write for this blocking socket with a buffer length of 8'193 bytes, write can block, waiting for room for the final byte. Read operations on a blocking socket will always return a short count if some data is available, but write operatoins on a blocking socket until all the data can be accepted by the kernel. Therefore, when using select to test for writability, we must set the socket to nonblocking to avoid blocking.
